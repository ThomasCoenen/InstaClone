(this.webpackJsonpsocialmedia=this.webpackJsonpsocialmedia||[]).push([[0],{11:function(e,t,c){},28:function(e,t,c){},43:function(e,t,c){"use strict";c.r(t);var n=c(2),s=c.n(n),a=c(17),o=c.n(a),r=(c(28),c(11),c(8)),i=c(3),l=Object(n.createContext)(),u=function(e){var t=Object(n.useState)(null),c=Object(r.a)(t,2),s=c[0],a=c[1];return Object(i.jsx)(l.Provider,{value:{user:[s,a]},children:e.children})},j=c(12),m=j.a.initializeApp({apiKey:"AIzaSyCI6FRkag1shYjjF7Dz9CXOOhJDchVP-ok",authDomain:"reactsocial-15668.firebaseapp.com",projectId:"reactsocial-15668",storageBucket:"reactsocial-15668.appspot.com",messagingSenderId:"342172377708",appId:"1:342172377708:web:13fbbc8082c9532f9b6e49"}).firestore(),d=j.a.auth(),p=j.a.storage(),b=new j.a.auth.GoogleAuthProvider;function h(e){var t=e.username,c=e.userpost;e.comment;return Object(i.jsx)("div",{className:"comment",children:Object(i.jsxs)("p",{className:"post__photoUrl",children:[Object(i.jsx)("span",{style:{fontWeight:"500",marginRight:"4px"},children:t}),c]})})}function f(e){var t=e.id,c=e.comments,s=Object(r.a)(Object(n.useContext)(l).user,2),a=s[0],o=(s[1],Object(n.useState)("")),u=Object(r.a)(o,2),j=u[0],d=u[1],p=Object(n.useState)(c||[]),b=Object(r.a)(p,2),h=b[0];b[1];return Object(i.jsxs)("div",{className:"commentInput",children:[Object(i.jsx)("textarea",{className:"commentInput_textarea",rows:"1",placeholder:"write a comment",value:j,onChange:function(e){return d(e.target.value)}}),Object(i.jsx)("button",{onClick:function(){""!=j&&(h.push({comment:j,username:a.email.replace("@gmail.com","").toLowerCase()}),m.collection("posts").doc(t).update({comments:h}).then((function(){d(""),console.log("comment added")})).catch((function(e){console.log("Error ".concat(e))})))},className:"commentInput_btn",children:"Postttt"})]})}function O(e){var t=e.profileUrl,c=e.username,s=e.id,a=e.photoUrl,o=e.userpost,u=e.comments,j=Object(r.a)(Object(n.useContext)(l).user,2),d=j[0];j[1];return Object(i.jsxs)("div",{className:"post",children:[Object(i.jsxs)("div",{className:"post__header",children:[Object(i.jsxs)("div",{className:"post__headerLeft",children:[Object(i.jsx)("img",{className:"post__profilePic",src:t,alt:""}),Object(i.jsx)("p",{style:{marginLeft:"8px"},children:c})]}),Object(i.jsx)("button",{onClick:function(){p.refFromURL(a).delete().then((function(){console.log("delete successful")})).catch((function(e){console.log("Error ".concat(e))})),m.collection("posts").doc(s).delete().then((function(){console.log("delete post info successful")})).catch((function(e){console.log("Error post info delete ".concat(e))}))},className:"post__delete",children:"Delete"})]}),Object(i.jsx)("div",{className:"post__center",children:Object(i.jsx)("img",{className:"post__photoUrl",src:a})}),Object(i.jsx)("div",{className:"",children:Object(i.jsxs)("p",{className:"post__photoUrl",children:[Object(i.jsx)("span",{style:{fontWeight:"500",marginRight:"4px"},children:c}),o]})}),u?u.map((function(e){return Object(i.jsx)(h,{username:e.username,userpost:e.comment})})):Object(i.jsx)(i.Fragment,{}),d?Object(i.jsx)(f,{id:s,comments:u}):Object(i.jsx)(i.Fragment,{})]})}var g=c(14),x=c.n(g),v=c(15),_=function(){var e=Object(v.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.signInWithPopup(b).then((function(e){t=e.user})).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function N(){var e=Object(r.a)(Object(n.useContext)(l).user,2),t=e[0],c=e[1],s=function(){var e=Object(v.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:(t=e.sent)&&c(t),console.log("userBySignIn:",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)("nav",{className:"navbar",children:[Object(i.jsx)("p",{children:"Social Media"}),t?Object(i.jsx)("img",{className:"navbar__img",src:t.photoURL}):Object(i.jsx)("div",{className:"signInBtn",onClick:s,children:Object(i.jsx)("p",{children:"Sign In With Google"})})]})}function I(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){m.collection("posts").onSnapshot((function(e){s(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(i.jsx)("div",{className:"feed",children:c.map((function(e){var t=e.id,c=e.post;return Object(i.jsx)(O,{id:t,profileUrl:c.profileUrl,username:c.username,photoUrl:c.photoUrl,userpost:c.userpost,comments:c.comments},t)}))})}var y=c(20),C=c.n(y);function P(){var e=Object(r.a)(Object(n.useContext)(l).user,2),t=e[0],c=(e[1],Object(n.useState)("")),s=Object(r.a)(c,2),a=s[0],o=s[1],u=Object(n.useState)(null),d=Object(r.a)(u,2),b=d[0],h=d[1],f=Object(n.useState)(0),O=Object(r.a)(f,2),g=O[0],x=O[1];return Object(i.jsx)("div",{className:"createPost",children:t?Object(i.jsxs)("div",{className:"createPost__loggedIn",children:[Object(i.jsx)("p",{children:"Create Post"}),Object(i.jsxs)("div",{className:"createPost__loggedInCenter",children:[Object(i.jsx)("textarea",{className:"createPost__textarea",row:"3",placeholder:"enter post here...",value:a,onChange:function(e){o(e.target.value)}}),Object(i.jsx)("div",{className:"createPost__imagePreview",children:Object(i.jsx)("img",{id:"image-preview",alt:""})})]}),Object(i.jsxs)("div",{className:"createPost__loggedInBottom",children:[Object(i.jsxs)("div",{className:"createPost__imageUpload",children:[Object(i.jsx)("label",{htmlFor:"fileInput",children:Object(i.jsx)(C.a,{style:{cursor:"pointer",fontSize:"20px"}})}),Object(i.jsx)("input",{id:"fileInput",type:"file",accept:"image/*",onChange:function(e){if(e.target.files[0]){h(e.target.files[0]);var t=URL.createObjectURL(e.target.files[0]),c=document.getElementById("image-preview");c.src=t,c.style.display="block"}}})]}),Object(i.jsx)("button",{className:"createPost__uploadBtn",onClick:function(){if(b){var e=function(e){for(var t="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=c.length,s=0;s<e;s++)t+=c.charAt(Math.floor(Math.random()*n));return t}(10);p.ref("images/".concat(e,".jpg")).put(b).on("state_changes",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);x(t)}),(function(e){console.log(e)}),(function(){p.ref("images").child("".concat(e,".jpg")).getDownloadURL().then((function(e){m.collection("posts").add({timestamp:j.a.firestore.FieldValue.serverTimestamp(),userpost:a,photoUrl:e,username:t.email.replace("@gmail.com",""),profileUrl:t.photoURL})})),o(""),x(0),h(null),document.getElementById("image-preview").style.display="none"}))}},style:{color:a?"#000":"lightgrey"},children:"Upload ".concat(0!=g?g:"")})]})]}):Object(i.jsx)("div",{className:"",children:"Sign In With Google to Post and Comment!"})})}function U(){return Object(i.jsxs)("div",{className:"home",children:[Object(i.jsx)(N,{}),Object(i.jsx)(P,{}),Object(i.jsx)(I,{})]})}var w=function(){return Object(i.jsx)(u,{children:Object(i.jsx)("div",{className:"app",children:Object(i.jsx)(U,{})})})},S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,55)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;c(e),n(e),s(e),a(e),o(e)}))};o.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(w,{})}),document.getElementById("root")),S()}},[[43,1,2]]]);
//# sourceMappingURL=main.3f55beb6.chunk.js.map